@{ Layout = null;}
@model ProjetoCursoFeriasSMN.Models.Cliente

<div id="modalDeletarCliente" class="modal">
    <div class="modal-content">
        <h4 class="bold">Deseja mesmo deletar este cliente?</h4>
        <div class="row">
            @Ajax.BeginForm("DeletarConfirma", "Cliente", new AjaxOptions
        {
            HttpMethod = "Get",
            OnSuccess = "RecarregaGrid(data)",
            OnFailure = "Error(xhr)"
        }){
            <input type="hidden" name="codigoCliente" id="codigoCliente" value="@Model.CodigoCliente"/>
            <div class="row">
                <div class="input-field col s6">
                    <label for="txtNome">Nome</label>
                    <input id="txtNome" name="Nome" type="text" value="@Model.Nome" disabled>
                </div>
                <div class="input-field col s6">
                    <label for="txtCpf">Cpf</label>
                    <input id="txtCpf" type="text" value="@Model.Cpf" disabled>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s6">
                    <label for="txtFone">Telefone</label>
                    <input id="txtFone" type="text" value="@Model.Telefone" disabled>
                </div>
                <div class="input-field col s6">
                    <label for="txtEmail">Email</label>
                    <input id="txtEmail" type="email" class="validate" data-error="e-mail incorreto" data-success="correto" value="@Model.Email"
                           disabled>
                </div>
            </div>
            <h5>Endereço</h5>
            <div class="row">
                <div class="input-field col s12">
                    <label for="txtCep">Cep</label>
                    <input id="txtCep" type="text" value="@Model.Endereco.Cep" disabled>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <label for="txtLogradouro">Logradouro</label>
                    <input id="txtLogradouro" type="text" value="@Model.Endereco.Logradouro" disabled>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s6">
                    <label for="txtBairro">Bairro</label>
                    <input id="txtBairro" type="text" value="@Model.Endereco.Bairro" disabled>
                </div>
                <div class="input-field col s6">
                    <label for="txtCidade">Cidade</label>
                    <input id="txtCidade" type="text" value="@Model.Endereco.Cidade" disabled>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <select id="txtEstado" disabled>
                        <option value="@Model.Endereco.Estado" selected>@Model.Endereco.Estado</option>
                    </select>
                </div>
            </div>
            }
        </div>
    </div>
    <div class="modal-footer">
        <a class="modal-action modal-close waves-effect waves-light btn" href="#!" type="submit">
            <i class="material-icons left">delete_forever</i>Confirma
        </a>
    </div>
</div>

<script>

    function RecarregaGrid(data) {
        //Exibindo um feedback de sucesso
        Materialize.Toast(data, 1000);

        //Fazendo a requisição no método que lista os produtos
        $.get('@Url.Action("Listar")').success(function (data) {
            $("#gridClientes tbody").html(data).slideDown("fast");
        }).error(function (xhr) {
            Materialize.toast(xhr.responseText, 4000);
        });
    }

    function Error(xhr) {
        Materialize.toast(xhr.responseText, 5000);
    }

</script>